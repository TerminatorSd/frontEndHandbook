> 学习Vim 的最好方式就是动手试一试

# Vim 常用快操作
Vim 的常规模式是命令模式，大多数时候，你都应该处于命令模式下。如果你需要编辑，编辑完以后立马回到命令模式。

### 学习Vim 的过程其实就是背单词、短语
不信你看看
```
// 操作符 + 动作命令 = 操作
:h operator // 查看操作符
cl   // change letter
dl   // delete letter
dw   // delete word
daw  // delete a word
dap  // delete a paragraph
gU   // growUp 大写
gUap // growUp a paragraph 
```

### 寄存器
寄存器是Vim 里一个非常重要的概念，要完成一些稍微复杂的操作，必须要使用到寄存器。
首先需要搞清楚的是寄存器是什么。作为程序员，对Ctrl-C 和Ctrl-V 肯定不陌生，我们可以把从一个地方复制到的内容粘贴到另一个地方，在这个过程中，被复制的内容会被放置在一个地方，叫做剪贴板。当我们再次使用Ctrl-C 复制新的内容的时候，剪贴板里的内容就被覆盖了。
而寄存器，正是与剪贴板对应的概念，我们在Vim 中剪切和复制的东西都放在这里面。但是，寄存器不是唯一的，也就是说在同一时间可以保存多份复制和剪切的内容。下面我们通过几个常见的Vim 使用问题来认识寄存器。
#### 使用`y`复制的内容只能粘贴一次
现在假设要把下面代码中的theName 改成myName，先把光标移到第一个theName 的任意位置，`ciw`，修改为myName，接着选中并复制这个单词`vby`，然后移到下一个theName 处，选中并替换`viwp`，再往下移动，到第三个单词，选中并替换`viwp`，这个时候发现第三个单词没有被替换成功，仍然是原来的值。
```
const myName = 'siuDong';
const tempStr = `${myName} haha`;
const tempStr2 = `${theName} haha`;
```

#### 使用`y`复制，再使用`d`删除，复制的内容就丢了

#### 把Vim 中的内容复制到外部某位置

### 动作命令
- 想成为盲打人员，要学的第一件事情就是让手指始终停留在本位行上；要想按到光标键，你非得把手从本位行上移开才行。
- 查看帮助 `:h motion.txt`
- 左下右上 `h j k l`
- 基于单词移动 `w b e ge`
- 跳到当前屏顶部、中部或底部 `H/M/L`
- 跳转到匹配的括号 `%`
- 跳转到上次的位置 ``
- 行内快速移动(till & find) `t & f
    - 把光标移到同一行的下一个c字符处 `fc`
    - 把光标移到同一行的上一个c字符处 `Fc`
    - 把光标移到同一行的下一个c字符前 `tc`
    - 把光标移到同一行的上一个c字符后 `Tc`
    - 快速移动到位之后，到达上一个或下一个相同字符处 `,/;`
 
### 信息插入
- 行首/行尾插入 `I/A`
- 下一行/上一行开头插入 `o/O`
- 删除当前行并插入 `cc`
- 删除当前光标向后的内容并插入 `C`

### 查找替换
- `/{x}`查找下一处，n 下移，N 上移
- `?{x}`查找上移除，n 上移，N 下移
- 全局替换 `:%s/{x}/{y}/g`
- 替换当前行 `:s/vivian/sky/g`
- 跳跃替换一个单词，从content 替换为copy `/content` `cwcopy` `n.`
- 替换更多：http://xstarcd.github.io/wiki/vim/vim_replace_encodeing.html

### 复制、剪切、删除
- 剪切行 `dd`
- 复制行 `yy`
- 粘贴行 `p`
- 多行复制 `:113,135 copy/co/t 112`
- 多行删除 `:113,135d`
- 删除一个单词/光标之后的单词剩余部分 `dw`
- 删除当前行光标以后的部分 `d$`
- 删除当前行光标以后部分，并变成插入模式 `C`
- 删除当前字符，并变成插入模式 `cl`
- 删除当前行，并在开头插入 `S`

### 计算
- 当前行的第一个数字的数值+/-10 `10<C-a>/10<C-x>`
```
background: -156 0;
```

### 文本对象
- 文本对象描述了一个完整的局部信息，比如 `aw/i'`
- 查看所有文本对象 `:help text-objects`

#### 多行编辑
```
esc 进入普通模式
^ + v 进入visual block 模式
上下选择多行
shift + i 编辑
再按esc
```
#### 多行缩进
```
按v进入visual状态，选择多行，用>或<缩进或缩出
```

### ex命令
ex 可用的命令非常多，可以产生非常amazing 的效果
- 切换colorscheme `:color<C-d> <Tab>`
- ex 命令可以使用跟shell 命令类似的语法，比如 `:pwd` `:ls` `:find`

### 具体场景（用-进行语义分割）
- 复制、删除、粘贴，寄存器中的内容会被覆盖，参考以下场景，把first 复制并替换second `vey-j-de-"0P` `ve-y-ve-p` 
```
first one
second one
```
- 从vim 中复制内容到系统粘贴板，以保证可以粘贴到外面其他地方 `v-"+y-<C-v>`
- git rebase 时经常要删除最开头的pick，改成s `cws`
```
pick #13123 哈哈
```
- 鼠标位于单引号中的任意位置时删除单引号中的内容，并变成插入模式：`ci'`
```
commnet: 'haha this is a test'
```
- 把下面所有的数字都改成20，可以使用如下两种方式
    - 鼠标先移动到1的位置`c6l20`，然后鼠标移动到5`c5l20`, 然后移动到4`c4l20`
    - 鼠标移动到1的位置`ctm20`，鼠标移动到5`.`，鼠标移动到4`.`，其中`.`表示动作回放
```
timeout: 100000ms,
wating: 50000ms,
starting: 4000ms
```
- 使用`vit`选中下述a标签之中的内容，maybe 可以翻译为【可视模式下inner tag】
```html
<a href="www.baidu.com">百度一下</a>
```
- 在+前后添加空格 `s_+_` `;.` `;.` `;.`，其中`;`会重复查找上次`f{x}`查找的内容，`,`反向查找
```
var foo = "method("+arg+","+arg2+")";
```
- 在vim 中编辑完文件以后才发现，没有权限修改，需要用sudo
```
:w !sudo tee % > /dev/null
```

### tips
- 在可视模式下操作，退出可视模式后，使用`gv`可以重新进入可视模式并选择上一次的选择结果
- 字符可视模式下选择一部分内容后，可以使用`o`在选中的内容开头和结尾进行跳转
- vim中使用`!`可以调用linux 系统中的工具命令，可以尝试一下`nl -v 1000`


### 插件管理
- 查看所有插件 `:scriptnames`
- 卸载插件 `vim ~/.vimrc` -> 注释要删除插件 -> `:source ~/.vimrc` -> 重新进入vim

### 宏
- 录制 `qaq`
- 查看宏 `:reg a`
- 编辑
```
G 
:put a
// edit
0
"ay$
dd
```

todo: 笔记到出厂设置


